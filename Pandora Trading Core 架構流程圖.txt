                         ┌────────────────────┐
                         │   Kline DataFrames │   (15m / 1h / 4h)
                         └──────────┬─────────┘
                                    │
                                    ▼
                     ┌──────────────────────────┐
                     │    TradingBridge.emit()   │
                     │  Ultra Zero-Copy Convert  │
                     └──────────┬───────────────┘
                                │ raw dict
                                ▼
            ┌────────────────────────────────────────────────┐
            │            MarketKlineAdapter v3                │
            │────────────────────────────────────────────────│
            │ 1) filter()      → 黑名單 / 欄位檢查            │
            │ 2) auto_fix()    → high<low, close 跳動, vol=0 │
            │ 3) anti_poison() → 高頻/重複事件防禦           │
            │ 4) enrich()      → interval / ts 補齊          │
            │ 5) make_event()  → PBEvent                     │
            │ 6) validator     → PBEventValidator soft mode  │
            └───────────────────┬────────────────────────────┘
                                │ PBEvent (validated)
                                ▼
              ┌───────────────────────────────────┐
              │      ZeroCopyEventBus (fast_bus)  │
              └───────────────────┬──────────────┘
                                  │  reference only (no copy)
                                  ▼
                    ┌─────────────────────────────────┐
                    │   PandoraRuntime Event Router   │
                    └─────────────────┬──────────────┘
                                      │ "market.kline"
                                      ▼
                     ┌────────────────────────────────┐
                     │       Trading Runtime          │
                     │    (Decision Pipeline v2)      │
                     └────────────────┬───────────────┘
                                      │ kline event
                                      ▼
                    ┌──────────────────────────────────┐
                    │   AI Manager / Attacker / Hub    │
                    │   Defender / Arbiter / Rewards   │
                    └──────────────────────────────────┘
